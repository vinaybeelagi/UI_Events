<!-- <!DOCTYPE HTML>
<html>

<head>
  <link type="text/css" rel="stylesheet" href="my.css">
  <meta charset="utf-8">
</head>

<body>

  <ul>
    <li>Click the div to edit.</li>
    <li>Enter or blur saves the result.</li>
  </ul>

  HTML is allowed.

  <div id="view" class="view">Text</div>

  <script>
    let area = null;
    let view = document.getElementById('view');

    view.onclick = function() {
      editStart();
    };

    function editStart() {
      area = document.createElement('textarea');
      area.className = 'edit';
      area.value = view.innerHTML;

      area.onkeydown = function(event) {
        if (event.key == 'Enter') {
          this.blur();
        }
      };

      area.onblur = function() {
        editEnd();
      };

      view.replaceWith(area);
      area.focus();
    }

    function editEnd() {
      view.innerHTML = area.value;
      area.replaceWith(view);
    }
  </script>

</body>
</html> -->

<html>

<head>
  <meta charset="utf-8">
  <style>
  /* common styles for the table, no need to modify these */

th {
  text-align: center;
  font-weight: bold;
}

td {
  width: 150px;
  white-space: nowrap;
  text-align: center;
  vertical-align: middle;
  padding: 10px;
}

.nw {
  background-color: #999;
}

.n {
  background-color: #03f;
  color: #fff;
}

.ne {
  background-color: #ff6;
}

.w {
  background-color: #ff0;
}

.c {
  background-color: #60c;
  color: #fff;
}

.e {
  background-color: #09f;
  color: #fff;
}

.sw {
  background-color: #963;
  color: #fff;
}

.s {
  background-color: #f60;
  color: #fff;
}

.se {
  background-color: #0c3;
  color: #fff;
}
</style>
</head>

<body>
  <link rel="stylesheet" href="bagua.css">
  <link rel="stylesheet" href="my.css">


  <p>Click on a table cell to edit it. Press OK or CANCEL when you finish.</p>

  <table id="bagua-table">
    <tr>
      <th colspan="3"><em>Bagua</em> Chart: Direction, Element, Color, Meaning</th>
    </tr>
    <tr>
      <td class="nw"><strong>Northwest</strong>
        <br>Metal
        <br>Silver
        <br>Elders
      </td>
      <td class="n"><strong>North</strong>
        <br>Water
        <br>Blue
        <br>Change
      </td>
      <td class="ne"><strong>Northeast</strong>
        <br>Earth
        <br>Yellow
        <br>Direction
      </td>
    </tr>
    <tr>
      <td class="w"><strong>West</strong>
        <br>Metal
        <br>Gold
        <br>Youth
      </td>
      <td class="c"><strong>Center</strong>
        <br>All
        <br>Purple
        <br>Harmony
      </td>
      <td class="e"><strong>East</strong>
        <br>Wood
        <br>Blue
        <br>Future
      </td>
    </tr>
    <tr>
      <td class="sw"><strong>Southwest</strong>
        <br>Earth
        <br>Brown
        <br>Tranquility
      </td>
      <td class="s"><strong>South</strong>
        <br>Fire
        <br>Orange
        <br>Fame
      </td>
      <td class="se"><strong>Southeast</strong>
        <br>Wood
        <br>Green
        <br>Romance
      </td>
    </tr>

  </table>


  <script>document.addEventListener('DOMContentLoaded', function () {
    let currentlyEditing = null;
  
    document.getElementById('bagua-table').addEventListener('click', function (event) {
      const clickedCell = event.target.closest('td');
  
      if (!clickedCell || clickedCell === currentlyEditing) {
        return;
      }
  
      if (currentlyEditing) {
        finishEditing();
      }
  
      currentlyEditing = clickedCell;
      const originalContent = clickedCell.innerHTML;
  
      const textarea = document.createElement('textarea');
      textarea.value = originalContent;
  
      const okButton = document.createElement('button');
      okButton.textContent = 'OK';
  
      const cancelButton = document.createElement('button');
      cancelButton.textContent = 'CANCEL';
  
      okButton.addEventListener('click', function () {
        finishEditing(true);
      });
  
      cancelButton.addEventListener('click', function () {
        finishEditing(false);
      });
  
      const buttonContainer = document.createElement('div');
      buttonContainer.appendChild(okButton);
      buttonContainer.appendChild(cancelButton);
  
      clickedCell.innerHTML = '';
      clickedCell.appendChild(textarea);
      clickedCell.appendChild(buttonContainer);
  
      textarea.focus();
    });
  
    function finishEditing(saveChanges) {
      if (currentlyEditing) {
        const cell = currentlyEditing;
        const textarea = cell.querySelector('textarea');
        const buttonContainer = cell.querySelector('div');
  
        if (saveChanges) {
          const updatedContent = textarea.value;
          cell.innerHTML = updatedContent;
        } else {
          cell.innerHTML = originalContent;
        }
  
        currentlyEditing = null;
      }
    }
  });
  </script>

</body>

</html>